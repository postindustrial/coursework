{% extends "base.html" %}

{% block settings %}

<form action="" method="post">
    {% csrf_token %}
    <p class="text-center">
        <label for="id_group">Выберите номер группы:</label>
        <select id="id_group" name="group" style="width: 180px">
            {% for item in groups %}
                <option>{{ item.name }}</option>
            {% endfor %}
        </select>
        <button class="btn" type="submit">Показать</button>
    </p>
</form>

{% endblock %}

{% block content %}

    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="{{ STATIC_URL }}js/bootstrap.min.js">
        $('#myTab a').click(function (e) {
        e.preventDefault();
        $(this).tab('show');
        })
    </script>

    <style>
        table { table-layout: fixed; }
        table th, table td { overflow: hidden; }
    </style>

    <legend>
        <strong>Расписание группы {{ selected_group }}</strong>
    </legend>

    <ul class="nav nav-tabs id=myTab">
        <li class="active"><a href="#first" data-toggle="tab">Первая неделя</a></li>
        <li><a href="#second" data-toggle="tab">Вторая неделя</a></li>
    </ul>

    <div class="tab-content">
        <div class="tab-pane active" id="first">
            {% for day_number, day_name in week_days %}
                <strong>{{ day_name }}</strong>
                <table class="table table-striped table-bordered" >
                    {% for item in selected_schedule %}
                        {% if item.week == 1 and item.weekday == day_number %}
                            <tr>
                                <td style="width: 8%">
                                    {{ item.get_begin_time_display }}
                                </td>
                                <td style="width: 42%">
                                    {{ item.course.name.name }}
                                </td>
                                <td style="width: 37%">
                                    {{ item.course.teacher.last_name }} {{ item.course.teacher.initials }}
                                </td>
                                <td style="width: 13%">
                                    {{ item.room }} / {{ item.building.name }}
                                </td>
                            </tr>
                        {% endif %}
                    {% empty %}
                        Занятий нет! <br>
                    {% endfor %}
                </table>
            {% endfor %}
        </div>

        <div class="tab-pane" id="second">
            {% for day_number, day_name in week_days %}
                <strong>{{ day_name }}</strong>
                <table class="table table-striped table-bordered" >
                    {% for item in selected_schedule %}
                        {% if item.week == 2 and item.weekday == day_number %}
                            <tr>
                                <td style="width: 8%">
                                    {{ item.get_begin_time_display }}
                                </td>
                                <td style="width: 42%">
                                    {{ item.course.name.name }}
                                </td>
                                <td style="width: 37%">
                                    {{ item.course.teacher.last_name }} {{ item.course.teacher.initials }}
                                </td>
                                <td style="width: 13%">
                                    {{ item.room }} / {{ item.building.name }}
                                </td>
                            </tr>
                        {% endif %}
                    {% empty %}
                        Занятий нет! <br>
                    {% endfor %}
                </table>
            {% endfor %}
        </div>
    </div>

    <script src="{{ STATIC_URL }}js/bootstrap.min.js">
        $(function () {
            $('#myTab a:first').tab('show');
        })
    </script>

{% endblock %}